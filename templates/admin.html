<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function(){
    // Function to handle the GET request for checking the waitlist
    $("#checkWaitlistBtn").click(function(e){
        e.preventDefault();
        $.ajax({
            url: '/admin/check_waitlist',
            type: 'GET',
            success: function(response) {
                alert('Waitlisted Users: ' + JSON.stringify(response.waitlisted_users));
            },
            error: function(response) {
                alert('Error occurred');
            }
        });
    });

    // General form submission handler
    $("form").submit(function(e){
        e.preventDefault();
        var form = $(this);
        $.ajax({
            url: form.attr("action"),
            type: form.attr("method"),
            data: form.serialize(),
            success: function(response) {
                alert(JSON.stringify(response));
            },
            error: function(xhr) {
                alert('Error: ' + xhr.responseText);
            }
        });
    });
});
</script>
</head>
<body>

<h2>Admin Functions</h2>

<h3>Add Credits</h3>
<form action="/admin/add_credits" method="POST">
    <input type="email" name="user_email" placeholder="User Email" required><br>
    <input type="text" name="activity" placeholder="Activity" required><br>
    <input type="number" name="credits" placeholder="Credits" required><br>
    <button type="submit">Add Credits</button>
</form>

<h3>Delete Job</h3>
<form action="/admin/delete_job" method="POST">
    <input type="text" name="user_key" placeholder="User Key" required><br>
    <input type="text" name="job_id" placeholder="Job ID" required><br>
    <button type="submit">Delete Job</button>
</form>

<h3>Delete All Jobs for a User</h3>
<form action="/admin/delete_user_jobs" method="POST">
    <input type="email" name="user_email" placeholder="User Email" required><br>
    <button type="submit">Delete All Jobs</button>
</form>

<h3>Add Name to User</h3>
<form action="/admin/add_name_to_user" method="POST">
    <input type="email" name="user_email" placeholder="User Email" required><br>
    <input type="text" name="name" placeholder="Name" required><br>
    <button type="submit">Add Name</button>
</form>

<h3>Remove Name from User</h3>
<form action="/admin/remove_name_from_user" method="POST">
    <input type="email" name="user_email" placeholder="User Email" required><br>
    <input type="text" name="name" placeholder="Name" required><br>
    <button type="submit">Remove Name</button>
</form>

<button id="checkWaitlistBtn">Check Waitlist</button>

</body>
</html>
